{% extends "base.html" %}
{% block title %}Trouver une famille d'accueil{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto py-10 px-4">
    <h1 class="text-3xl font-bold text-emerald-800 mb-6">Trouver une famille d'accueil</h1>

    <!-- üîç Filtres -->
    <form method="GET" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div>
            <label for="region" class="block text-sm font-medium text-gray-700">R√©gion</label>
            <select name="region" id="region" class="mt-1 block w-full rounded border-gray-300 shadow-sm">
                <option value="">Toutes les r√©gions</option>
                {% for region in regions %}
                    <option value="{{ region }}" {% if region == selected_region %}selected{% endif %}>{{ region }}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for="ethnie" class="block text-sm font-medium text-gray-700">Ethnie</label>
            <select name="ethnie" id="ethnie" class="mt-1 block w-full rounded border-gray-300 shadow-sm">
                <option value="">Toutes les ethnies</option>
                {% for ethnie in ethnies %}
                    <option value="{{ ethnie }}" {% if ethnie == selected_ethnie %}selected{% endif %}>{{ ethnie }}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for="langue" class="block text-sm font-medium text-gray-700">Langue parl√©e</label>
            <select name="langue" id="langue" class="mt-1 block w-full rounded border-gray-300 shadow-sm">
                <option value="">Toutes les langues</option>
                {% for langue in langues %}
                    <option value="{{ langue }}" {% if langue == selected_langue %}selected{% endif %}>{{ langue }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="md:col-span-3 flex justify-end">
            <button type="submit" class="bg-emerald-600 text-white px-6 py-2 rounded hover:bg-emerald-700 mt-4">
                Filtrer
            </button>
        </div>
    </form>

    <!-- üìã Liste des familles -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        {% for famille in familles %}
        <div class="bg-white rounded-xl shadow-md p-4 flex flex-col justify-between">
            <img src="{{ url_for('static', filename='images/familles/' + (famille.photo or 'default.jpg')) }}" alt="Famille" class="rounded-md mb-4 h-40 object-cover w-full">
            <div>
                <h2 class="text-xl font-semibold text-emerald-800">{{ famille.nom_famille }}</h2>
                <p class="text-sm text-gray-600">üìç {{ famille.region }}</p>
            </div>
            <div class="mt-4 text-right">
                <a href="{{ url_for('public.details_famille', id=famille.id) }}" class="inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded hover:bg-blue-200 transition">
                    üëÅÔ∏è Voir plus
                </a>
            </div>
        </div>
        {% else %}
        <p class="text-gray-500 col-span-3">Aucune famille ne correspond √† vos filtres.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
